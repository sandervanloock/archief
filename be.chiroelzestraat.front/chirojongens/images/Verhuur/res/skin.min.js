/* 
	Turtle skin by Laszlo Molnar (C) 2011
	version 3.4.5
*/
var DEBUG=!1,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",vend=$.browser.msie&&"ms"||$.browser.webkit&&"webkit"||$.browser.mozilla&&"moz"||$.browser.opera&&"o"||"",vendor=vend?"-"+vend+"-":"";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};
String.prototype.trunc=function(b){if(this.length<=b)return this;var b=this.substring(0,b-1),i=b.lastIndexOf(" ");return(6<i&&20>b.length-i?b.substring(0,i):b)+"..."};String.prototype.startsWith=function(b){return 0===this.indexOf(b)};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};String.prototype.getExt=function(){var b=this.lastIndexOf(".");return 0>=b||b>=this.length-1?"":this.substring(b+1).toLowerCase()};
String.prototype.fixExtension=function(){return this.replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")};var htmlregex=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']];String.prototype.cleanupHTML=function(){for(var b=this,i=htmlregex.length-1;0<=i;i--)b=b.replace(htmlregex[i][0],htmlregex[i][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};
String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,i){return(this.length?this+(i||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if("#"===this.charAt(0))return this;for(var b,i=this.match(/\d+/g),p="",w=0;w<i.length&&3>w;w++)b=parseInt(i[w]).toString(16),p+=(2>b.length?"0":"")+b;return"#"+p};
String.prototype.template=function(b){if(!b)return this;for(var i=this,p=0;p<b.length;p++)i=i.replace(RegExp("\\{"+p+"\\}","gi"),b[p]);return i};Math.minMax=function(b,i,p){return $.isNumeric(i)?i<b?b:i>p?p:i:b};var _logel,_logover=!1,_lastlog,_lastcnt=1;
log=function(b){DEBUG&&!_logover&&(_logel||(_logel=$('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){_logover=!0},function(){_logover=!1}).appendTo("body")),b===_lastlog?_logel.children(":first").empty().html(_lastlog+" ("+ ++_lastcnt+")"):($('<div style="height:2em;overflow:hidden;">'+b+"</div>").prependTo(_logel),_lastlog=b,_lastcnt=1))};
checkFlash=function(b){var i=navigator,p=[1,0,0],w,b=b?b.split("."):[0,0,0];if(typeof i.plugins!=UNDEF&&typeof i.plugins[SHOCKWAVE_FLASH]==OBJECT){if((w=i.plugins[SHOCKWAVE_FLASH].description)&&!(typeof i.mimeTypes!=UNDEF&&i.mimeTypes[FLASH_MIME_TYPE]&&!i.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))w=w.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),p[0]=parseInt(w.replace(/^(.*)\..*$/,"$1"),10),p[1]=parseInt(w.replace(/^.*\.(.*)\s.*$/,"$1"),10),p[2]=/[a-zA-Z]/.test(w)?parseInt(w.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var C=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(C&&typeof C.GetVariable!=UNDEF&&(w=C.GetVariable("$version")))w=w.split(" ")[1].split(","),p[0]=parseInt(w[0],10),p[1]=parseInt(w[1],10),p[2]=parseInt(w[2],10)}catch(v){}return p[0]>b[0]||p[0]==b[0]&&p[1]>b[1]||p[0]==b[0]&&p[1]==b[1]&&p[2]>=b[2]};
typeof Search!==UNDEF&&(Search.start=function(b){var i="FORM"===b.nodeName?$(b).find("input[type=search]").val().trim():$(b).text().trim(),p=$("<div>",{"class":"searchresults"}),w=0,C,v,F,K,m,Z=RegExp("("+i.replace(/\s/g,"|")+")","gi");if(Search.data&&$.isArray(Search.data)&&Search.data.length&&i&&!(2>i.length)){p.append($("<h4>",{html:Search.text.title+" &quot;<b>"+i+"</b>&quot;"}));for(i=0;i<Search.data.length;i++)for(C=0;C<Search.data[i][1].length;C++)if(Z.test(Search.data[i][1][C])){m=Search.data[i][1][C].split(Search.sep);
K=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"";v=K+(Search.data[i][0]?Search.data[i][0]+"/":"");F=$("<a>",{href:v+(m[0].startsWith("#")?Search.indexName:"")+m[0]}).appendTo(p);F.append($("<aside>").append($("<img>",{src:m[0].startsWith("#")?m[0].toLowerCase().match(/.+\.(jpg|png)$/)?v+"thumbs/"+m[0].substr(1):K+"res/unknown.png":v+Search.folderThumb})));m[1]&&F.append($("<h5>",{text:m[1]}));m[2]&&m[2]!==m[1]&&F.append($("<p>",{text:m[2].trunc(192)}));for(v=3;v<m.length;v++)m[v]&&
m[v].trim().length&&F.append($("<p>",{text:m[v].trunc(192)}));w++}$(b).parents(".hint:first").fadeOut(100,function(){$(this).remove()});w?setTimeout(function(){p.find("a:first").focus()},250):p.append($("<p>",{text:Search.text.notFound}));p.alertBox([{t:Search.text.close}],{width:400});return!1}});
(function(b){b.fn.logEvents=function(a){var d=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus, load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend";return this.each(function(){b(this).on(d,function(a){a.target.id!=="log"&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+a.target.nodeName.toLowerCase()+
"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return true})})};b.fn.trackCss=function(a,d,c){var c=c||20,f=new Date;return this.each(function(){var g=b(this),h=function(a){var b=new Date-f;log(b+"&nbsp;::&nbsp;"+a+" = "+g.css(a));b>d&&clearInterval(u)},u=setInterval(function(){if(b.isArray(a))for(var c=
0;c<a.length;c++)h(a[c]);else h(a)},c)})};b.fn.readData=function(a,d){if(a==null||d==null)return this;var d=d.split(","),c,f=d.length,g;return this.each(function(){for(c=0;c<f;c++)if((g=b(this).data(d[c]))!=null)a[d[c]]=g})};b.extend(b.support,{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,cssTable:!b.browser.msie||b.browser.version>=8,cssFilter:b.browser.msie&&b.browser.version<=8,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,
{easeOutBack:function(a,b,c,f,g,h){h==null&&(h=1.70158);return f*((b=b/g-1)*b*((h+1)*b+h)+1)+c},easeOutCubic:function(a,b,c,f,g){return f*((b=b/g-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),d={width:a.width(),height:a.height()};if((d.width===0||d.height===0)&&a.css("display")==="none"){var c=a.css("position"),f=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});d.width=
a.width();d.height=a.height();a.css({display:"none",position:c,left:f})}return d};var i=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var p=i.length;p;)b.event.fixHooks[i[--p]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=i.length;a;)this.addEventListener(i[--a],w,false);else this.onmousewheel=w},teardown:function(){if(this.removeEventListener)for(var a=i.length;a;)this.removeEventListener(i[--a],w,false);else this.onmousewheel=null}};
b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var w=function(a){var d=a||window.event,c=[].slice.call(arguments,1),f=0,g=0,h=0,a=b.event.fix(d);a.type="mousewheel";d.wheelDelta?f=d.wheelDelta/120:d.detail&&(f=-d.detail/3);h=f;if(d.axis!==void 0&&d.axis===d.HORIZONTAL_AXIS){h=0;g=-1*f}d.wheelDeltaY!==void 0&&(h=d.wheelDeltaY/120);d.wheelDeltaX!==void 0&&(g=-1*d.wheelDeltaX/120);c.unshift(a,
f,g,h);return(b.event.dispatch||b.event.handle).apply(this,c)},C=function(a,b,c){if(arguments.length>1&&/^(string|number|boolean)$/.test(typeof b)){var f=new Date;f.setTime(f.getTime()+(typeof c!=="number"?1:c)*36E5);document.cookie=encodeURIComponent(a)+"="+String(b)+"; expires="+f.toGMTString()+"; path=/";return b}if(a)for(var a=a+"=",f=document.cookie.split(";"),g,h=0;h<f.length;h++){g=f[h].trim();if(g.indexOf(a)===0){g=g.substring(a.length);return/^(true|yes)$/.test(g)?true:/^(false|no)$/.test(g)?
false:/^([\d.]+)$/.test(g)?parseFloat(g):g}}return null},v={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(d){return a}},encoder:encodeURIComponent},F={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},
put:function(a){var b=this._document();b.open();b.close();v.put(a,b)},get:function(){return v.get(this._document())}},K={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(a,d){var c;c=b.extend({unescape:false},d||{});var f=c.unescape;if(f===true)c=function(a){return a};else{if(c=typeof f=="string"){c=f.split("");var g=RegExp(b.map(c,encodeURIComponent).join("|"),"ig");c=f=function(a){return a.replace(g,decodeURIComponent)}}c=c||typeof f=="function"?function(a){return f(encodeURIComponent(a))}:
encodeURIComponent}v.encoder=c;m.callback=a;m._options=d;m._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=v.get();m._appState=a;m.callback(a);setInterval(m.check,100)},check:function(){var a=v.get();if(a!=m._appState){m._appState=a;m.callback(a)}},load:function(a){if(a!=m._appState){v.put(a);m._appState=a;m.callback(a)}}},iframeTimer:{_appState:void 0,_init:function(){var a=v.get();m._appState=a;F.init().put(a);m.callback(a);setInterval(m.check,100)},check:function(){var a=
F.get(),b=v.get();if(b!=a)if(b==m._appState){m._appState=a;v.put(a);m.callback(a)}else{m._appState=b;F.put(b);m.callback(b)}},load:function(a){if(a!=m._appState){v.put(a);F.put(a);m._appState=a;m.callback(a)}}},hashchangeEvent:{_init:function(){m.callback(v.get());b(window).on("hashchange",m.check)},check:function(){m.callback(v.get())},load:function(a){v.put(a)}}},m=b.extend({},K.base);m.type=b.browser.msie&&(b.browser.version<8||document.documentMode<8)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":
"timer";b.extend(m,K[m.type]);b.history=m;b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var d,c=b(this),f=b(this).parent(),g,h,u,G,j,k,r,z,i=0,m,L,p,n,w,v;c.css({position:"absolute",width:f.width-20});f.css({overflow:"hidden"});f.css("position")!=="absolute"&&f.css({position:"relative"});g=b("<div>",{"class":a.upbtn}).appendTo(f);h=b("<div>",{"class":a.dnbtn}).appendTo(f);u=b("<div>",{"class":a.scbar}).appendTo(f);G=b("<div>").appendTo(u);j=g.add(h).add(u);
j.hide();var A=function(){return c.position().top},P=function(a){return Math.round((u.height()-6)*-(a==null?A():a)/k)+3},B=function(){return Math.max(Math.round((u.height()-6)*r/k),a.dragMinSize)},x=function(b){b==null&&(b=A());g.css({opacity:b?1:a.disabledOpacity});h.css({opacity:b===r-k?a.disabledOpacity:1})},D=function(){return false},y=function(){var a=k,b=r;k=c.height();r=f.height();if(a!==k||b!==r)if(k<=r){c.css({top:0}).off("selectstart",D);j.hide()}else{c.position().top<r-k&&c.css({top:r-
k});G.css({top:P(),height:B()});c.on("selectstart",D);j.show();x()}},I=function(b){clearInterval(z);if(!(r>=k)){b=Math.minMax(r-k,b,0);G.stop(true,true).animate({top:P(b)},a.speed,a.effect);c.stop(true,true).animate({top:b},a.speed,a.effect,function(){x(b)})}};g.click(function(){I(A()+r);return false});h.click(function(){I(A()-r);return false});u.click(function(a){a.pageY<G.offset().top?I(A()+r):a.pageY>G.offset().top+G.height()&&I(A()-r);return false});a.enableMouseWheel&&c.mousewheel(function(b,
c){c&&I(A()+a.wheelIncr*(c<0?-1:1));return false});var C=function(a){G.css({top:Math.minMax(2,Math.round(a.pageY-G.data("my")),u.height()-G.height()-2)});c.css({top:Math.minMax(r-k,-Math.round((G.position().top-3)*k/(u.height()-6)),0)});x();return false},ra=function(){b(document).off("mousemove",C).off("mouseup",ra);return false};G.on("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-b(this).position().top);b(document).on({mousemove:C,mouseup:ra});return false});var W=function(a){return i=
a.touches&&a.touches.length>0?a.touches[0].clientY:a.clientY?a.clientY:i},F=function(){w=w+Math.round(n/20);var a=p+w;if(a>0||a<v)clearInterval(z);else{c.css({top:a});G.css({top:P(),height:B()});n=n*0.8;if(Math.abs(n)<10){n=0;clearInterval(z)}}},Q=function(a){if(L){if(a=W(a)-L){c.data("dragOn",true);c.css({top:Math.minMax(v,m+a,0)});G.css({top:P(),height:B()})}}else L=W(a);return false},R=function(a){p=A();var a=W(a)-L,d=(new Date).getTime()-tT;n=1E3*a/d;z=setInterval(F,50);if(b.support.touch)this.ontouchend=
this.ontouchmove=null;else b(document).off({mousemove:Q,mouseup:R});setTimeout(function(){c.data("dragOn",false)},20);return Math.abs(a)<4&&d<300},S=function(a){if(r>=k||(a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||c.is(":animated")))return true;clearInterval(z);te=a;m=A();L=W(a);tT=(new Date).getTime();w=0;v=r-k;if(b.support.touch){b(a.target).closest("a").focus();this.ontouchmove=Q;this.ontouchend=R;return true}b(document).on({mousemove:Q,mouseup:R});return false};
if(b.support.touch)c[0].ontouchstart=S;else c.on("mousedown",S);b(window).resize(function(){clearTimeout(d);d=setTimeout(y,50)});d=setTimeout(y,10);a.refresh&&setInterval(function(){b("[role=gallery]").is(":visible")||y()},a.refresh);c.attr("role","scroll").data("dragOn",false).on("adjust",y);j.on("selectstart",D);c.find("a").on("setactive",function(){var a=b(this).parent()===c?b(this):b(this).parent(),d=a.position().top,a=a.outerHeight(true),r=c.position().top,g=f.height();if(!(g>c.height())){if(d+
a>g-r)r=Math.max(g-a-d,g-c.height());else if(d<-r)r=-d;else return;I(r)}});(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(function(c){if(document.activeElement&&document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return true;switch(c?c.keyCode:window.event.keyCode){case 33:I(A()+r);return false;case 34:I(A()-r);return false}return true})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,
effect:"swing",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:true,enableMouseWheel:true,refresh:0};b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var d=b(this),c=b(this).parent(),f=0,g,h,u,G,j,k,r,z,i=b("<div>",{"class":a.scleft}).insertAfter(c),m=b("<div>",{"class":a.scright}).insertAfter(c),L=function(b){b=b==null?d.position().left:b;i.css({opacity:b<0?1:a.disabledOpacity});m.css({opacity:c.width()<b+d.width()?1:a.disabledOpacity})},p=function(f){var r=
c.width(),g=d.width();if(r&&g&&!(r>=g)&&b.isNumeric(f)){f>0?f=0:f<r-g&&(f=r-g);L(f);d.stop(true,false).animate({left:f},a.speed,a.effect)}};i.click(function(){p(d.position().left+c.width());return false});m.click(function(){p(d.position().left-c.width());return false});d.find("a").on("setactive",function(){var f=b(this).parent()===d?b(this):b(this).parent(),r=f.position().left,f=f.outerWidth(true),g=Math.round(f*a.headRoom),h=d.position().left,z=c.width();d.find("a.active").removeClass("active");
b(this).addClass("active");if(!(z>d.width())){if(r>z-f-g-h)h=Math.max(z-f-g-r,z-d.width());else if(r<-h+g)h=-r+g;else return;p(h)}});a.enableMouseWheel&&d.mousewheel(function(a,b){b&&p(d.position().left+c.width()*(b<0?-1:1));return false});L();var n=function(a){return f=a.touches&&a.touches.length>0?a.touches[0].clientX:a.clientX?a.clientX:f},w=function(){k=k+Math.round(j/20);var a=G+k;if(a>0||a<r)clearInterval(z);else{d.css({left:a});j=j*0.8;if(Math.abs(j)<10){j=0;clearInterval(z)}}},v=function(a){if(h){if(a=
n(a)-h){d.data("dragOn",true);d.css({left:Math.minMax(r,g+a,0)})}}else h=n(a);return false},A=function(a){G=d.position().left;var a=n(a)-h,c=(new Date).getTime()-u;j=1E3*a/c;z=setInterval(w,50);if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off({mousemove:v,mouseup:A});setTimeout(function(){d.data("dragOn",false)},20);return Math.abs(a)<4&&c<300},C=function(a){if((a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||d.is(":animated")))return true;
clearInterval(z);te=a;g=d.position().left;h=n(a);u=(new Date).getTime();k=0;r=c.width()-d.width();if(b.support.touch){b(a.target).closest("a").focus();this.ontouchmove=v;this.ontouchend=A;return true}b(document).on({mousemove:v,mouseup:A});return false};if(b.support.touch)d[0].ontouchstart=C;else d.on("mousedown",C);d.attr("role","scroll").data("dragOn",false);d.add(i).add(m).on("selectstart",function(a){a.preventDefault();return false})})};b.fn.scrollThumbs.defaults={scleft:"scleft",scright:"scright",
speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:true};b.fn.addSwipe=function(a,d,c){c=b.extend({},b.fn.addSwipe.defaults,c);return this.each(function(){var f=b(this),g=0,h=0,u=0,G=0,j,k,r,z,i,m,p,v,n,w,C,A;f.attr("draggable","true");var P=function(a){if(a.touches&&a.touches.length>0){g=a.touches[0].clientX;h=a.touches[0].clientY}else if(a.clientX){g=a.clientX;h=a.clientY}},B=function(a){P(a);u=g;G=h},x=function(a){if(u){P(a);A?f.css({left:g-u+j}):f.css({left:g-
u+j,top:h-G+k})}else B(a);return false},D=function(){return false},y=function(n){P(n);var i=(new Date).getTime()-r,n=g-u;if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off("mousemove",x).off("mouseup click",y);if(v<z)if(Math.abs(n)<c.treshold){A?f.animate({left:j},200):f.animate({left:j,top:k},200);f.trigger("click")}else{A?f.animate({left:f.position().left+Math.round(333*(g-u)/i)},500,"easeOutCubic"):f.animate({left:f.position().left+Math.round(333*(g-u)/i),top:f.position().top+
Math.round(333*(h-G)/i)},500,"easeOutCubic");n<0?b.isFunction(a)&&a.call():b.isFunction(d)&&d.call()}else{A?f.animate({left:Math.minMax(w,f.position().left+Math.round(333*(g-u)/i),c.margin)},500,"easeOutCubic"):f.animate({left:Math.minMax(w,f.position().left+Math.round(333*(g-u)/i),c.margin),top:Math.minMax(C,f.position().top+Math.round(333*(h-G)/i),c.margin)},500,"easeOutCubic");i=f.position().left;n<0?i+v<m&&b.isFunction(a)&&a.call():i>p&&b.isFunction(d)&&d.call()}return false},I=function(a){if((a.type===
"touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||f.is(":animated")))return true;B(a);F(a)},F=function(a){f.stop(true,false);j=f.position().left;k=f.position().top;r=(new Date).getTime();z=f.parent().outerWidth();i=f.parent().outerHeight();m=z*(1-c.oversizeTreshold);p=z*c.oversizeTreshold;v=f.outerWidth();n=f.outerHeight();w=z-c.margin-v;C=i-c.margin-n;A=n<=i;if(b.support.touch){this.ontouchmove=x;this.ontouchend=y;return true}f.off("click");f.click(D);b(document).on({mousemove:x,
mouseup:y});a.cancelBubble=true;return false};if(b.support.touch)this.ontouchstart=I;else f.on({dragstart:F,mousedown:B});f.on("dragcancel",function(){f.stop(true,false).animate({left:j,top:k},200);return false});f.on("unswipe",function(){if(b.support.touch)this.ontouchstart=this.ontouchend=this.ontouchmove=null;else{b.isFunction(f.noAction)&&f.off(D);b.isFunction(f.dragStart)&&f.off(F);b(document).off("mousemove",x).off("mouseup",y)}});f.on("selectstart",D)})};b.fn.addSwipe.defaults={treshold:40,
oversizeTreshold:0.15,margin:15};var Z=ALIGN_TOP=0,O=ALIGN_MIDDLE=1,ja=ALIGN_BOTTOM=2;b.fn.alignTo=function(a,d){d=b.extend({},b.fn.alignTo.defaults,d);typeof a==="string"&&(a=b(a));if(a instanceof b&&a.length){var c=a.offset(),f=a.outerWidth(),g=a.outerHeight();return b(this).each(function(){var h=b(this).outerWidth(),u=b(this).outerHeight(),i=Math.round(c.left+d.toX*f/2+(d.toX-1)*d.gap);ry=Math.round(c.top+d.toY*g/2+(d.toY-1)*d.gap);l=Math.round(i-d.posX*h/2);t=Math.round(ry-d.posY*u/2);t<0?d.toX!==
O?t=0:d.toY!==ALIGN_BOTTOM&&(t=c.top+a.outerHeight()+d.gap):t+u>b(window).height()&&(d.toX!==O?t=b(window).height()-u:d.toY!==ALIGN_TOP&&(t=c.top-u-d.gap));l<0?d.toY!==ALIGN_MIDDLE?l=0:d.toX!=ja&&(l=c.left+a.outerWidth()+d.gap):l+h>b(window).width()&&(d.toY!==ALIGN_MIDDLE?l=b(window).width()-h:d.toX!=Z&&(l=c.left-h-d.gap));b(this).css({position:"absolute",left:l,top:t})})}};b.fn.alignTo.defaults={gap:5,posX:O,posY:ALIGN_BOTTOM,toX:O,toY:ALIGN_TOP};b.fn.addHint=function(a,d){if(a&&typeof a!=="string"&&
!a.jquery){d=a;a=null}d=b.extend({},b.fn.addHint.defaults,d);return this.each(function(){var c=b(this),f=a||c.attr("title"),g,h=false,u=false,i=!(f&&f.jquery),j;if(f&&f.length){var k=function(){if(i){var a=b("#"+d.id);a.length||(a=b("<div>",{"class":d.id,id:d.id}).hide().appendTo("body"));j=a;j.empty().html(f)}else j=f.show();j.off("mouseover",r);j.off("mouseout",k);var r=function(){g=clearTimeout(g);h=true;j.stop(true,true).css({opacity:1}).show()},k=function(){if(!u){g=clearTimeout(g);h=false;z()}};
j.on("mouseover",r);j.on("mouseout",k);j.find("input").focus(function(){u=true;r()}).blur(function(){u=false});j.stop(true,true).alignTo(c,{posX:d.posX,posY:d.posY,toX:d.toX,toY:d.toY});j.css({opacity:0}).show().animate({opacity:1},200);b.support.touch?g=setTimeout(z,d.stay):h=true},r=function(){h=false;g=clearTimeout(g);z()},z=function(){!h&&(j&&j.length)&&j.stop(true,false).animate({opacity:0},200,function(){b(this).hide()})};f.jquery?f.addClass(d.id):c.removeAttr("title");c.on(b.support.touch?
{touchstart:k}:{"focus mouseenter":k,"blur mouseleave":r})}})};b.fn.addHint.defaults={id:"hint",stay:3E3,posX:O,posY:ALIGN_BOTTOM,toX:O,toY:ALIGN_TOP};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,a);b("#"+a.id).remove();var d,c=b("<div>",{id:a.id}).appendTo("body"),f=b("<div>",{"class":"panel"}).appendTo(c);f.css({width:a.width}).append(this);var g=function(){c.fadeOut(250,function(){b(this).remove()})};c.fadeIn(250,function(){d=setTimeout(g,a.length)});f.css({marginTop:Math.max(Math.round((b(window).height()-
f.outerHeight())*0.4),0)}).hover(function(){d=clearTimeout(d);b(this).stop(true,false).css("opacity",1)},function(){d=setTimeout(g,a.length)});return this};b.fn.popupBox.defaults={id:"modal",width:200,length:500};b.fn.alertBox=function(a,d){if(!b.isArray(a)){d=a;a=null}d=b.extend({},b.fn.alertBox.defaults,d);b("#"+d.id).remove();var c=b("<div>",{id:d.id,role:"alertBox"}).appendTo("body"),f=b("<div>",{"class":"panel"}).appendTo(c),g,h;f.append(this);f.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).click(function(){i();
return false}));a&&(g=b("<div>",{"class":"buttons"}).appendTo(f));f.css({width:d.width});var u=function(a){if(document.activeElement&&document.activeElement.nodeName==="input"||b.isFunction(d.enableKeyboard)&&!d.enableKeyboard())return true;var c=a?a.keyCode:window.event.keyCode;if(a===27)i();else if(g){var a=g.find("a.active"),f=h.index(a);switch(c){case 13:case 10:if(b.isFunction(a[0].handler)){a[0].handler.call();i();return false}case 39:j((f+1)%h.length);return false;case 37:j(f?f-1:h.length-
1);return false}}return true},i=function(){b(document).off("keydown",u);c.fadeOut(250,function(){b(this).remove()})},j=function(a){h.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&a.length){for(var k,r=0;r<a.length;r++){r&&g.append(" ");k=b("<a>",{href:NOLINK}).appendTo(g);k.html(a[r].t);if(b.isFunction(a[r].h))k[0].handler=a[r].h;k.click(function(){this.handler!=null&&this.handler.call();i();return false})}h=g.children("a");h.last().addClass("active")}(b.isFunction(d.enableKeyboard)||
d.enableKeyboard)&&b(document).keydown(u);c.fadeIn(250);f.css({marginTop:Math.max(Math.round((b(window).height()-f.outerHeight())*0.4),0)});return this};b.fn.alertBox.defaults={id:"modal",width:420,enableKeyboard:true};b.fn.equalHeight=function(){var a,d,c=0,f=0,g;return(g=b(this).length)<2?this:this.each(function(h){a=b(this);if(a.offset().top===c){d=d?d.add(a):a;f=Math.max(f,a.height());h===g-1&&f&&d.height(f)}else{d&&f&&d.height(f);d=a;f=a.height();c=a.offset().top}})};b.fn.shareIt=function(a){var a=
b.extend({},b.fn.shareIt.defaults,a),d=encodeURIComponent(a.useHash?window.location.href:window.location.href.split("#")[0]),c=encodeURIComponent(b("meta[name=title]").attr("content")||b("title").text()),f=encodeURIComponent(a.callTxt);encodeURIComponent(b("link[rel=img_src]").attr("href"));return this.each(function(){var g=b(this);this.nodeName==="a"&&g.attr("href",NOLINK);var h=b("<div>",{"class":a.id}).hide();if(location.protocol.startsWith("file:")&&!DEBUG)h.html(a.localWarning);else{a.facebookLike&&
!a.useHash&&h.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&!a.useHash&&h.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+
d+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');if(a.googlePlus&&gapi&&!a.useHash){var u=b('<div class="g-plusone likebtn" data-size="medium" data-annotation="inline" data-href="'+d+'" data-width="110"></div>').appendTo(h);gapi.plusone.render(u[0])}a.tumblrBtn&&!a.useHash&&h.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/photo?source='+d+"&caption="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</div>');
a.facebook&&h.append('<a href="http://www.facebook.com/sharer.php?u='+d+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&h.append('<a href="http://twitter.com/home?status='+f+": "+d+'" class="twitter">Twitter</a>');a.gplus&&h.append(b("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+d,title:"Share on Google+",text:"Google+"}).on("click",function(){window.open(this.href,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=980,width=760");return false}));a.digg&&h.append('<a href="http://digg.com/submit?url='+
d+'" class="digg">Digg</a>');a.delicious&&h.append('<a href="http://delicious.com/save?url='+d+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&h.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+c+"&u="+d+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&h.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&h.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit">Reddit</a>');
h.children("a").attr("target","_blank");a.email&&h.append('<a href="mailto:?subject='+f+"&body="+c+"%0D%0A"+d+'" class="email">Email</a>')}g.addHint(h.appendTo("body"),a.pos).on("destroy",function(){h.remove()})})};b.fn.shareIt.defaults={id:"shares",useHash:true,likeBtnTheme:"light",facebookLike:true,twitterTweet:true,googlePlus:true,tumblrBtn:true,facebook:true,twitter:true,gplus:true,digg:true,delicious:true,myspace:true,stumbleupon:true,reddit:true,email:true,callTxt:"Found this page",pos:{posX:1,
posY:2,toX:1,toY:0},localWarning:"Can't share local albums. Please upload your album first!"};b.fn.addRegions=function(a,d,c){if(a&&a.length&&d){c=b.extend({},b.fn.addRegions.defaults,c);a.width();a.height();for(var f=[],g,h,u,i,j,k=d.split("::"),d=0;d<k.length;d++){g=k[d].split(";");g.length>4&&(g[0].length&&(h=parseFloat(g[1]))!=null&&(u=parseFloat(g[2]))!=null&&(i=parseFloat(g[3]))!=null&&(j=parseFloat(g[4]))!=null)&&f.push([g[0],(h-i/2)*100+"%",(u-j/2)*100+"%",i*100+"%",j*100+"%"])}return!f.length?
this:this.each(function(){var d=b(this),g,h;g=parseInt(d.css("padding-top"));this.nodeName==="a"&&d.attr("href",NOLINK);var j=b("<div>",{"class":c.id}).hide(),k=b("<div>",{"class":c.id+"-cont"}).css({left:g,top:g,right:g,bottom:g});for(p=0;p<f.length;p++){g=b('<a href="'+NOLINK+'">'+f[p][0]+"</a>").appendTo(j);h=b("<a>").css({left:f[p][1],top:f[p][2],width:f[p][3],height:f[p][4]}).append(b("<span>",{text:f[p][0]})).appendTo(k);g.hover(function(){k.children("a").eq(b(this).index()).addClass(c.active)},
function(){k.children("a").eq(b(this).index()).removeClass(c.active)});typeof Search!==UNDEF&&h.click(function(){Search.start(this);return false})}d.addHint(j.appendTo("body"),c.pos).on("destroy",function(){j.remove()});d.hasClass(c.active)&&k.addClass(c.active);d.click(function(){b(this).add(k).toggleClass(c.active)});a.append(k)})}};b.fn.addRegions.defaults={id:"regions",active:"active",pos:{posX:1,posY:2,toX:1,toY:0}};var Q={flashVideo:[".flv.3gp.3g2",24],flash:[".swf",0],video:[".mp4.f4v.m4v",
24],html5Video:[".ogv.webm",30],qtVideo:[".qt.mov.mpg.mpeg.mpe",16],wmVideo:[".avi.wmv.asf.asx.wvx.mkv",64],audio:[".mp3.aac.m4a",24],html5audio:[".ogg.wav.ram.rm",30]},sa=function(a){a=a.getExt();if(!a.length)return null;for(var b in Q)if(Q[b][0].indexOf(a)>=0)return b;return null};b.fn.addPlayer=function(a){var a=b.extend({},b.fn.addPlayer.defaults,a),d=0,c=a.resPath?a.resPath+"/":"",f=function(a){var b="",c;for(c in a)b=b+('<param name="'+c+'" value="'+a[c]+'">');return b},g=function(a){var c=
b(a.target);if(c)if(b.browser.msie){c.hide();(function(){if(c.readyState==4){if(c){for(var a in c)typeof c[a]==="function"&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)})()}else c.remove()},h=function(g,h,r,z,i,u){var m="media"+d++;g.addClass("flplayer").css({width:r,height:z+Q.flashVideo[1]});h="netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&id="+m+"&file="+encodeURIComponent(h)+"&image="+encodeURIComponent(i)+(u&&u.length?"&folder="+encodeURIComponent(u):
"")+"&autostart="+a.auto+"&loop="+a.loop+"&screencolor="+encodeURIComponent(a.bgcolor)+"&controlbar.position=bottom";m='<object id="'+m+'" name="'+m+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';m=b.browser.msie?m+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+f({movie:c+a.swf}):m+('type="application/x-shockwave-flash" data="'+c+a.swf+'">');m=m+f({allowfullscreen:true,allowscriptaccess:"always",seamlesstabbing:true,wmode:"opaque",flashvars:h});return b(m).appendTo(g)},
u=function(c,f,g,h){var i="em"+d++;c.addClass("emplayer");return b('<embed class="otherplayer" id="'+i+'" src="'+f+'" autostart="'+a.auto+'" loop="'+a.loop+'" width="'+g+'" height="'+h+'">').appendTo(c)},i=function(c,f,g,h,i,m){if((m=m!==UNDEF&&m)&&!Modernizr.audio||!m&&!Modernizr.video)return u(c,f,g,h);var p="ht"+d++,G=Q.html5Video[1];c.addClass("h5player").css({width:g,height:h+G});c=b(m?"<audio>":"<video>",{id:p,src:f,width:g,height:h,controls:true,preload:"auto",poster:i,autoplay:a.auto,loop:a.loop}).appendTo(c);
if(b.isFunction(a.complete))c.on("ended",a.complete);return c};return this.each(function(){var j=b(this),k=null;j.readData(a,"file,folder,width,height,poster");if(a.file){switch(sa(a.file)){case "flashVideo":if(!b.support.flash){j.append(a.flashInstall);break}case "video":if(b.support.flash){k=h(j,a.file,a.width,a.height,a.poster);break}case "html5Video":k=i(j,a.file,a.width,a.height,a.poster);break;case "qtVideo":var k=a.file,r=a.width,z=a.height,m="qt"+d++,p=Q.qtVideo[1];j.addClass("qtplayer").css({width:r,
height:z+p});r='<object id="'+m+'" width="'+r+'" height="'+(z+p)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+k+'">');r=r+f({src:k,autoplay:a.auto,scale:a.fit?"tofit":"1",enablejavascript:true,postdomevents:true});j=b(r).appendTo(j);if(b.isFunction(a.complete))j.on("qt_ended",a.complete);k=j;break;case "wmVideo":k=a.file;r=a.width;z=a.height;m="wm"+d++;p=Q.wmVideo[1];
j.addClass("wmplayer").css({width:r,height:z+p});r='<object id="'+m+'" width="'+r+'" height="'+z+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+k+'">');r=r+f({URL:k,SendPlayStateChangeEvents:true,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(r=r+"<a></a>");el=b(r).appendTo(j);if(b.isFunction(a.complete))el.on("playStateChange",function(){a.complete.call(this)});k=el;break;case "audio":if(b.support.flash){if(a.swf==b.fn.addPlayer.defaults.swf)k=
h(j,a.file,a.width,a.height,a.poster,a.folder);else{k=a.file;r=a.width;z=a.height;m=a.folder;j.addClass("flplayer").css({width:r,height:z});k="file="+encodeURIComponent(k)+(m&&m.length?"&folder="+encodeURIComponent(m):"")+"&autostart="+a.auto+"&loop="+a.loop;r='<object width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';r=b.browser.msie?r+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+f({movie:c+a.swf}):r+('type="application/x-shockwave-flash" data="'+c+a.swf+'">');r=r+f({wmode:"opaque",
flashvars:k});k=b(r).appendTo(j)}break}case "html5audio":k=i(j,a.file,a.width,a.height,a.poster,true);break;default:k=u(j,a.file,a.width,a.height)}k.on("destroy",g)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:false,loop:false,fit:true,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var d=
b(this),c=d.find(a.selector);if(c.length){var f,g,h,i,m,j=a.marginLeft+a.padding;f=a.marginRight+a.padding;var k=a.marginTop+a.padding,r=a.marginBottom+a.padding;g=c.data("ow");h=c.data("oh");if(!g||!h){c.data("ow",g=c.width());c.data("oh",h=c.height())}if(!(i=c.data("bw")))c.data("bw",i=parseInt(c.css("border-top-width"))||0);if(!(m=c.data("pw")))c.data("pw",m=parseInt(c.css("padding-top"))||0);f=(d.innerWidth()||b("body").width())-2*(i+m)-j-f;d=(d.innerHeight()||b("body").height())-2*(i+m)-k-r;
if(a.fit&&(g>f||h>d||a.enlarge)){i=Math.min(f/g,d/h);g=Math.round(g*i);h=Math.round(h*i)}i=Math.round((f-g)/2)+j;m=Math.round((d-h)/2)+k;if(a.animate){c.stop(true,false);if(a.preScale&&a.preScale!==1){var r=g*a.preScale,z=h*a.preScale;c.css({left:Math.round((f-r)/2)+j,top:Math.round((d-z)/2)+k,width:Math.round(r),height:Math.round(z)})}else a.init&&c.css({left:i,top:m});c.animate({left:i,top:m,width:g,height:h},{duration:a.speed,easing:a.effect,complete:a.complete})}else{c.css({left:i,top:m,width:g,
height:h});b.isFunction(a.complete)&&a.complete.call(this)}}})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:true,enlarge:true,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:false,animate:false,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),d;b.fn.addInput=function(a,d,g,h){var i;return!a||d==null?this:this.each(function(){i=b("<input>",{type:g||"text"}).appendTo(b(this));i.attr("name",a);i.addClass(a);i.val(typeof d===
"string"?d.stripQuote():d);h&&i.prop(h,h)})};b.fn.addSelect=function(a,f,g){return!a.length?this:this.each(function(){var h=b(this),h=b("<select>").appendTo(h);for(d=0;d<a.length;d++)h.append(b("<option>",{val:a[d].val,text:a[d].key+" ("+f+" "+a[d].val+")"}));b.isFunction(g)&&h.change(g)})};return this.each(function(){var c=b(this),f,g,h;c.readData(a,"gateway,id,currency,handling,options,file");if(!(a.id==null||a.options==null||a.file==null)){id=a.gateway=="paypal"?{form:"paypal",seller:"business",
currency:"currency_code",title:"item_name",select:"item_number",price:"amount",copies:"quantity",shipprice:"shipping",shipprice2:"shipping2",handling:"handling_cart",shopUrl:"shopping_url"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};var i=a.options.split("::"),m,j=[];for(d=0;d<i.length;d++){m=i[d].split("=");
m.length>1&&j.push({key:m[0],val:m[1]})}a.id=a.id.replace("|","@");var k=function(c){var d=g.children("[name^="+id.shipprice+"]");if(c===null||c===false||!b.isNumeric(c))a.gateway==="paypal"?d.remove():d.val(0);else if(d.length)d.val(c);else if(a.gateway==="paypal"){g.addInput(id.shipprice,c,"hidden");a.shippingFlat||g.addInput(id.shipprice2,c,"hidden")}},i=function(){var b=f.length?f.children("select").eq(0):false;if(b&&b.length){var c,b=b.val().split("+");q=f.children("[name=copies]").val()||1;
if(a.quantityCap&&q>a.quantityCap)f.children("[name=copies]").val(q=a.quantityCap);(c=f.children("[name=total]"))&&c.val((b[0]*q).toFixed(2));(c=g.children("[name="+id.price+"]"))&&c.val(b[0]);(c=g.children("[name="+id.copies+"]"))&&c.val(q);k(b.length>1?b[1]:null);(c=g.children("[name="+id.select+"]"))&&c.val(f.find("option:selected").text())}};f=b("<form>",{name:"shopping",method:"post"}).appendTo(c);f.addSelect(j,a.currency,i);a.quantityCap!=1&&f.append("x").addInput("copies",1);f.append("=").addInput("total",
j[0].val.split("+")[0],"text","readonly");f.children("[name=copies]").css({width:"3em"}).change(i);f.children("[name=total]").css({width:"5em"});f.append(a.currency);if(a.gateway==="paypal"){h=j[0].val.split("+");g=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(c);g.addInput("cmd","_cart","hidden");g.addInput("add",1,"hidden");g.addInput(id.seller,a.id,"hidden");g.addInput(id.copies,1,"hidden");g.addInput(id.price,h[0],"hidden");g.addInput(id.currency,
a.currency,"hidden");k(h.length>1?h[1]:null);a.handling!=null&&b.isNumeric(a.handling)&&g.addInput(id.handling,a.handling,"hidden");g.addInput(id.title,decodeURIComponent(a.path+a.file),"hidden");g.addInput(id.select,j[0].key+" ("+a.currency+" "+j[0].val+")","hidden");g.addInput(id.shopUrl,window.location.href,"hidden");g.addInput("charset","utf-8","hidden");g.addInput("lc",a.locale,"hidden");g.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",
alt:"Add to Cart"}));h=b("<form>",{"class":"view",name:"paypalview",target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(c);h.addInput("cmd","_cart","hidden");h.addInput("display",1,"hidden");h.addInput(id.seller,a.id,"hidden");h.addInput("lc",a.locale,"hidden");h.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",alt:"View Cart"}))}else if(a.gateway==="google"){i=a.id.match(/(\d+)/)[0];g=b("<form>",
{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+i+"/checkoutForm",method:"post","accept-charset":"utf-8"}).appendTo(c);g.addInput(id.title,decodeURIComponent(a.path+a.file),"hidden");g.addInput(id.select,j[0].key,"hidden");g.addInput(id.copies,1,"hidden");g.addInput(id.price,j[0].val.split("+")[0],"hidden");g.addInput(id.currency,a.currency,"hidden");if(a.shipping!=null&&b.isNumeric(a.shipping)){g.addInput(id.shipmethod,"normal","hidden");g.addInput(id.shipprice,
a.shipping,"hidden");g.addInput(id.shipcurrency,a.currency,"hidden")}g.addInput("_charset_","","hidden");g.append(b("<input>",{id:"shopAdd",type:"image",name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+i+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,width:160}))}g.add(h).find("input[name=submit]").on("submit",function(){window.open("",a.target,"width=960,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no");
return true})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal",locale:"US",quantityCap:0,shippingFlat:false};var ta=function(a){if(a==null)return null;if(typeof a==="string"){a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a);return new google.maps.LatLng(a[1],a[2])}return new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(!google||!google.maps)return this;var a=b.extend({},b.fn.setupMap.defaults,a),d=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,
new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,24),new google.maps.Point(17,0),new google.maps.Point(8,24)),zIndex:9999},c=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,
24))};return this.each(function(){var f=b(this),g,h,i,m,j;f.readData(a,"type,zoom,map,label,resPath,markers");var k=function(){if(f.data("fresh"))if(f.is(":visible")&&!f.parents(":hidden").length&&f.width()&&f.height()){clearTimeout(j);f.width(f.parents(".cont").width()-30);google.maps.event.trigger(i,"resize");i.setCenter(g);f.data("fresh",false)}else j=setTimeout(k,200)};m&&m.length&&m.remove();m=b("<div>").css({position:"absolute",top:"-9000px",width:f.width(),height:f.height()}).appendTo("body");
f.data("fresh",true).on({adjust:k,destroy:function(){i.getParentNode().removeChild(i);b(window).unbind("resize",k)}});if(a.markers&&a.markers.length&&a.curr!=null)g=a.markers[a.curr].map;else if(a.map){g=ta(a.map);h=a.label}else return;setTimeout(function(){var r=new google.maps.Map(m[0],{zoom:a.zoom,center:g,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(r,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=r.getMapTypeId()});google.maps.event.addListener(r,"zoom_changed",
function(){b.fn.setupMap.defaults.zoom=r.getZoom()});if(a.markers&&a.markers.length>1)for(var j,k,p=Math.min(a.curr+a.range,a.markers.length),v=Math.max(a.curr-a.range,0);v<p;v++){k=a.markers[v];j={position:k.map,map:r,title:k.label,zIndex:v};if(v==a.curr)j=new google.maps.Marker(b.extend(j,d));else{j=new google.maps.Marker(b.extend(j,c));if(jQuery.isFunction(a.click)&&k.link){j.link=k.link;google.maps.event.addListener(j,"click",function(){a.click.call(this)})}}}else j=new google.maps.Marker(b.extend({position:g,
map:r,title:h},d));m.css({top:0}).appendTo(f);i=r},20);b(window).resize(function(){clearTimeout(j);f.data("fresh",true);j=setTimeout(k,100)})})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);if(a.markNewDays){var d=Math.round((new Date).getTime()/864E5);return this.each(function(){d-parseInt(b(this).data("modified")||0)<=a.markNewDays&&b(this).after(a.newLabel)})}};b.fn.markFoldersNew.defaults={markNewDays:7,
newLabel:"NEW"};b.fn.fullScreen=function(a){var b=function(a,b){b=b==="FullScreen"&&vend==="webkit"?vend+"Is"+b:vend&&vend+b||b.substr(0,1).toLowerCase()+b.substr(1);return typeof a[b]==="function"?a[b]():a[b]};return typeof a===UNDEF?b(this[0],"FullScreen"):this.each(function(){s=b(this,"FullScreen");a?s||b(this,"RequestFullScreen"):s&&b(this,"CancelFullScreen")})};b.fn.turtleHelp=function(a,d){var a=b.extend({},b.fn.turtleHelp.defaults,a),d=b.extend({},b.fn.turtleHelp.texts,d),c=b(a.templ.template(d.help));
a.useF1&&!b.support.touch&&b(document).keydown(function(d){if(document.activeElement&&document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#modal:visible").length)return true;if((d?d.keyCode:window.event.keyCode)===112){c.alertBox({width:680});return false}return true});return this.each(function(){b(this).click(function(){c.alertBox({width:680});return false})})};b.fn.turtleHelp.defaults={useF1:true};b.fn.turtleHelp.texts={help:["Using Turtle gallery",
"Top <b>navigation</b> bar with <b>Home</b> button","<b>Up</b> one level <em>Up arrow</em>","Author or company <b>information</b>","<b>Share</b> and <b>Like</b> buttons for social networking","<b>Search</b> button","Start slideshow <em>Numpad *</em>","Previous image <em>Left arrow</em>","Back to index page <em>Esc</em>","Toggle zoom (fit/1:1) <em>Numpad +</em>","Toggle info window <em>Numpad -</em>","Toggle thumbnail scoller","Start / Stop slideshow <em>Numpad *</em>","Next image <em>Right arrow</em>",
"Swipe for previous / next image"]};b.fn.turtleGallery=function(a,d,c){a=b.extend({},b.fn.turtleGallery.defaults,a);d=b.extend({},b.fn.turtleGallery.texts,d);c=b.extend({},b.fn.turtleGallery.ids,c);setTimeout(function(){if(!a.licensee&&(typeof _jaShowAds==UNDEF||_jaShowAds)&&location.protocol.startsWith("http")&&!C("ls")){var c=a.resPath+"/logo.png";b(new Image).load(function(){b("<div>").css({background:"url("+c+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h3>Turtle skin<h3></h3><p>Unlicensed</p>").popupBox();
C("ls",true)}).attr("src",c)}},1E3);for(var f=["thumbsOn","infoOn","metaOn","mapOn","regionsOn","shopOn","shareOn","printOn","fitImage"],g=function(b,c){location.protocol.startsWith("file")||C(b,c);a[b]=c},h,i=0;i<f.length;i++)if(h=C(f[i]))a[f[i]]=h;if(b.support.touch)a.preScale=false;b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;b.fn.setupShop.defaults.gateway=a.shopGateway;b.fn.setupShop.defaults.id=a.shopId;b.fn.setupShop.defaults.path=
(a.albumName||"")+": "+a.relPath;b.fn.setupShop.defaults.currency=a.shopCurrency||"EUR";b.fn.setupShop.defaults.handling=a.shopHandling||null;b.fn.setupShop.defaults.locale=a.shopLocale||"US";b.fn.setupShop.defaults.quantityCap=a.shopQuantityCap||0;b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=
a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(i in a.shares)b.fn.shareIt.defaults[i]=a.shares[i];b.fn.shareIt.defaults.callTxt=d.checkOutThis;var m=function(b){var d=b.data(c.caption);if(d)return d.stripHTML();return(b=b.closest("a"))?b.attr("href").replace(RegExp("^"+a.slides+"\\/"),""):""},j='<span class="'+c.newItem+'">'+d.newItem+"</span>",k=Math.round((new Date).getTime()/864E5);return this.each(function(){var f=b(this).find("li > a"),
h,i,p,u,v,n={},w,C,A,F,B,x=null,D=null,y=0,I,K,O=b(window).width(),W=b(window).height(),Z=[],ja=function(d){if(document.activeElement&&(document.activeElement.nodeName==="INPUT"||document.activeElement.nodeName==="TEXTAREA")||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#modal:visible").length)return true;d=d?d.keyCode:window.event.keyCode;if(h.is(":visible"))switch(d){case 27:S();break;case 37:var d=b("."+c.main),g=b("."+c.img);if(d.length)if(d.position().left>=a.fitPadding)ea();else{g=
Math.round(g.width()*0.8);d.animate({left:Math.min(d.position().left+g,a.fitPadding)},a.scrollDuration)}break;case 38:d=b("."+c.main);g=b("."+c.img);if(d.length&&!(d.position().top>a.fitPadding)){g=Math.round(g.width()*0.8);d.animate({top:Math.min(d.position().top+g,a.fitPadding)},a.scrollDuration)}break;case 39:d=b("."+c.main);g=b("."+c.img);if(d.length)if(d.position().left+d.outerWidth()<=g.width()-a.fitPadding)U();else{var i=Math.round(g.width()*0.8);d.animate({left:Math.max(d.position().left-
i,g.width()-a.fitPadding-d.outerWidth())},a.scrollDuration)}break;case 40:d=b("."+c.main);g=b("."+c.img);if(d.length&&!(d.position().top+d.outerHeight()<=g.height()-a.fitPadding)){i=Math.round(g.width()*0.8);d.animate({top:Math.max(d.position().top-i,g.height()-a.fitPadding-d.outerHeight())},a.scrollDuration)}break;case 97:case 35:M(f.length-1);break;case 103:case 36:M(0);break;case 106:case 179:if(I)V();else{a.slideshowFullScreen&&h.fullScreen(true);aa()}break;case 107:a.fitImage?ua():va();break;
case 109:if(a.infoOn||a.thumbsOn){wa();xa()}else{ya();za()}break;default:return true}else switch(d){case 13:case 10:M();break;case 27:R();break;case 37:y=(y?y:f.length)-1;T();break;case 38:y&&a.cols&&(y=Math.max(0,y-a.cols));T();break;case 39:y=(y+1)%f.length;T();break;case 40:y<f.length-1&&a.cols&&(y=Math.min(f.length-1,y+a.cols));T();break;case 97:case 35:y=f.length-1;T();break;case 103:case 36:y=0;T();break;case 106:case 179:a.slideshowFullScreen&&h.fullScreen(true);M();aa();break;default:return true}return false},
R=function(){window.location.href=a.uplink||"../"},S=function(){var c=b("[role=main]");if(h.is(":visible")){V();a.slideshowFullScreen&&b(document).fullScreen(false);if(a.skipIndex)R();else{if(c.length&&c.is(":hidden")){c.children().andSelf().css({visibility:"visible",display:"block"});c.find(".folders>ul>li").equalHeight();c.find(".thumbs>ul>li p").length&&c.find(".thumbs>ul>li").equalHeight();c.find("[role=scroll]").trigger("adjust")}a.transitions?h.fadeOut(a.speed):h.hide();a.hash!=="no"&&b.history.load("")}}else c.length&&
c.is(":hidden")&&c.children().andSelf().css({visibility:"visible",display:"block"});c.find("[role=scroll]").data("dragOn",false)},qa=function(){var a=f.eq(y).attr("href");return a&&a.substr(a.lastIndexOf("/")+1)},T=function(a){f.filter("."+c.active).removeClass(c.active);f.eq(y).addClass(c.active);(typeof a===UNDEF||a===false)&&f.eq(y).trigger("setactive");C.eq(y).trigger("setactive")},ea=function(){V();y?M(y-1):a.afterLast==="startover"?M(f.length-1):x.find("."+c.main).trigger("dragcancel")},U=function(){if(y<
f.length-1){ka();M(y+1)}else if(a.afterLast==="startover"||I&&a.slideshowLoop){ka();M(0)}else{if(a.afterLast==="onelevelup"){if(a.uplink){R();return}}else if(a.afterLast==="backtoindex"){if(!a.skipIndex){S();return}}else if(a.afterLast==="ask"){V();var g=Array({t:d.startOver,h:function(){M(0)}});a.uplink&&g.push({t:a.level>0?d.upOneLevel:d.homepageLinkText||d.backToHome,h:function(){R()}});a.skipIndex||g.push({t:d.backToIndex,h:function(){S()}});b("<h4>"+d.atLastPage+"</h4><p>"+d.atLastPageQuestion+
"</p>").alertBox(g)}x.find("."+c.main).trigger("dragcancel")}},ka=function(){if(I){clearInterval(I);I=setInterval(U,a.slideshowDelay)}},aa=function(){n.play.hide();n.pause.showin();I=setInterval(U,a.slideshowDelay);H()},V=function(){n.pause.hide();n.play.showin();I=clearInterval(I);H()},Aa=function(){if(!F){u.stop(true,false).css({opacity:0.7}).fadeIn(200,function(){b.support.cssFilter&&u.css("filter",null)});B=setTimeout(function(){H()},1500)}},H=function(){if(F)B=setTimeout(function(){H()},500);
else{B=clearTimeout(B);u.fadeOut(300)}},Fa=function(){if(u.is(":visible")){B=clearTimeout(B);u.fadeOut(300)}else Aa()},wa=function(){if(a.infoOn){n.hideInfo.hide();n.showInfo.showin();a.transitions?v.animate({bottom:-v.outerHeight()},500,function(){v.hide()}):v.css({bottom:-v.outerHeight()}).hide();H();g("infoOn",false)}},ya=function(){if(!a.infoOn){n.showInfo.hide();n.hideInfo.showin();v.is(":hidden")&&v.show().css({bottom:-v.outerHeight()});var b=function(){v.children("."+c.map).trigger("adjust")};
if(a.transitions)v.animate({bottom:0},500,b);else{v.show().css({bottom:0});b()}H();g("infoOn",true)}},xa=function(){if(a.thumbsOn){n.hideThumbs.hide();n.showThumbs.showin();a.transitions?p.animate({top:-w.outerHeight()-10},500):p.css({top:-w.outerHeight()-10});x&&a.fitFreespace&&x.centerThis({fit:a.fitImage,marginTop:0});H();g("thumbsOn",false)}},za=function(){if(!a.thumbsOn){n.showThumbs.hide();n.hideThumbs.showin();a.transitions?p.animate({top:0},500):p.css({top:0});x&&a.fitFreespace&&x.centerThis({fit:a.fitImage,
marginTop:w.outerHeight()});H();g("thumbsOn",true)}},ca=function(){return a.fitFreespace&&p.position().top>=0?w.outerHeight()||0:0},ua=function(){n.noresize.hide();n.resize.showin();x.centerThis({fit:false,marginTop:ca()});H();g("fitImage",false)},va=function(){n.resize.hide();n.noresize.showin();x.centerThis({fit:true,marginTop:ca()});H();g("fitImage",true)},Ba=function(a){if(!(a<0||a>=f.length)){var d=f.eq(a).children("img").eq(0);!d.data(c.isvideo)&&(!d.data(c.isother)&&!d.data("cached")&&(s=d.data(c.src)))&&
b("<img>").load(function(){d.data("cached",true)}).attr({src:s})}},fa=function(a){a.trigger("destroy");a.find("."+c.share+"-"+c.icon).trigger("destroy");a.find("."+c.map).trigger("destroy")},M=function(j){h.is(":hidden")&&(a.transitions?h.fadeIn(a.speed):h.show());if(typeof j!==UNDEF&&j!=null){var k;if(j==null)k=y;else if(typeof j==="number")k=Math.minMax(0,j,f.length);else if((k=f.index(j))<0)k=C.index(j);j=k}else j=y;if(!(x&&x.data("curr")===j)){var n,p=f.eq(j),u,w,p=p.children("img").eq(0);if(p.length){if(x){if(D&&
D.length){D.stop();fa(D);D.remove()}D=x;D.css({zIndex:0});D.find("."+c.main).trigger("unswipe").off("touchstart");D.unmousewheel()}(n=h.children("."+c.img).not(x)).length&&n.stop().remove();x=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).data({curr:j}).on("click",function(a){if(b(a.target).hasClass("img")){S();return false}}).appendTo(h);i.css({opacity:0,display:"block"}).animate({opacity:1});y=j;T();var A=b("<div>",{"class":c.main});if(p.data(c.isother)||!(u=p.data(c.src))){n=Math.max(p.data(c.width)||
h.width()-160,280);k=Math.max(p.data(c.height)||h.height()-120,200);w=p.clone();A.addClass(c.other);if((u=p.data(c.content))&&(u=u.trim()).length)A.css({width:n,height:k}).append(u.startsWith("http://")?b("<iframe>",{width:"100%",height:"100%",src:u,frameborder:0,allowfullscreen:"allowfullscreen"}):u);else{A.append(b("<a>",{href:p.data(c.link),target:"_blank"}));A.append(b("<p>",{text:d.clickToOpen}));A.children("a:first").append(w)}la(A)}else if(p.data(c.isvideo)||p.data(c.isaudio)){n=p.data(c.width)||
h.width()-160;k=p.data(c.height)||h.height()-120;var F=I;F&&V();if(p.data(c.isvideo)){u=h.width()-40;w=h.height()-40;var E=p.data(c.link),E=sa(E);k=k+(E&&Q[E][1]||0);if(n>u||k>w){u=Math.min(u/n,w/k);n=Math.round(n*u);k=Math.round(k*u)}}else{n=Math.max(280,p.attr("width")||0);k=Math.max(280,p.attr("height")||0)}A.addClass(c.other).css({width:n,height:k}).data({ow:n,oh:k});el=A.addPlayer({complete:function(){if(F){U();aa()}},file:p.data(c.link),resPath:a.resPath,poster:p.data(c.poster)||p.attr("src"),
auto:a.videoAuto,fit:a.videoFit,width:n,height:k});A.data("media",el);la(A)}else{n=p.data(c.width);k=p.data(c.height);w=b(new Image);A.addClass(c.image).append(w).css({width:n,height:k}).data({ow:n,oh:k});w.load(function(){p.data("cached",true);la(A)}).attr({src:u,width:n||"auto",height:k||"auto"})}var B=p;v=b("<div>",{"class":c.bottom});x.append(v);var H=b("<div>",{"class":c.cont}).appendTo(v),J=b("<nav>").appendTo(H),K,O;n=Math.round(x.width()*0.8)-30;H.width()>n&&H.width(n);a.showImageNumbers&&
H.append('<div class="nr"><strong>'+(j+1)+"</strong> / "+f.length+"</div>");(K=B.data(c.caption))&&H.append(K);var L,N;n=[c.meta,c.map,c.shop,c.share,c.print,c.comment];for(u=0;u<n.length;u++){N=n[u];if(B.data(N)!=null){L=b("<div>",{"class":c.panel+" "+c[N]}).data("rel",N).appendTo(H);L.append(b("<div>",{"class":c.icon}));j=b("<a>",{href:NOLINK,"class":N+"-"+c.icon,text:" "}).appendTo(J);j.data("rel",N).addHint(d[N+"Btn"]||N);j.click(function(){var d=b(this).data("rel"),f=H.children("."+d);o=f.is(":hidden");
b(this).toggleClass(c.active,o);if(d===c.map){var h=function(){o&&f.children("."+c.mapcont).trigger("adjust")};if(a.transitions)f.slideToggle("fast",h);else{f.toggle();setTimeout(h,50)}}else a.transitions?f.slideToggle("fast"):f.toggle();g(d+"On",o)})}}if(!B.data(c.isvideo)&&!B.data(c.isaudio)&&!B.data(c.isother)){if(a.fotomotoOn){var P=b("<a>",{href:NOLINK,"class":c.fotomoto+"-"+c.icon,text:" "}).appendTo(J);P.addHint(location.protocol.startsWith("file:")?d.locationWarning:d.fotomotoHint);setTimeout(function(){typeof FOTOMOTO!==
UNDEF&&!location.protocol.startsWith("file:")&&P.click(function(){FOTOMOTO.API.showWindow(10,B.attr("src").replace(a.thumbs+"/",a.slides+"/"));return false})},a.speed)}if(B.data(c.regions)){j=b("<a>",{href:NOLINK,"class":c.regions+"-"+c.icon,text:" "}).appendTo(J);a[c.regions+"On"]&&j.addClass(c.active);j.click(function(){g(c.regions+"On",!b(this).hasClass(c.active))})}}if(!a.rightClickProtect&&(K=B.data(c.link))){j=b("<a>",{href:K,"class":c.link+"-"+c.icon,target:"_blank",text:" "}).appendTo(J);
j.addHint("<strong>"+(B.data(c.isoriginal)?d.original:d.hiRes)+"</strong><br><small>"+d.saveTip+"</small>")}if(a.shareOn){var R=b("<a>",{href:NOLINK,"class":c.share+"-"+c.icon,text:" "}).appendTo(J);O=a.hash==="number"?y+1:qa();setTimeout(function(){R.shareIt({hash:O})},a.speed)}x.append(v);H.children("."+c.panel).each(function(){L=b(this);if((N=L.data("rel"))&&(K=B.data(N))!=null){if(N===c.map){var d=b("<div>",{"class":c.mapcont}).appendTo(L);d.width(H.width()-30);a.mapAll?d.setupMap({click:function(){M(this.link)},
markers:Z,curr:parseInt(B.data(c.mapid))}):d.setupMap({map:K,label:m(B)});setTimeout(function(){d.trigger("adjust")},a.speed)}else N===c.shop?L.addClass("clearfix").setupShop({file:B.attr("src").replace("thumbs/",""),options:K}):L.append(K);a[N+"On"]?J.children("a."+N+"-icon").addClass(c.active):L.hide()}});J.html().length||J.remove();a.infoOn||v.hide()}}},la=function(d){if(a.transitions){i.stop(true,false).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}});if(D){var g=D;D.stop(true,
false).animate({opacity:0},{duration:a.speed/2,complete:function(){fa(g);g.remove()}});D=null}}else{i.hide();if(D){D.stop();fa(D);D.remove()}}var h=d.hasClass(c.image);x.children().not("."+c.bottom).remove();x.append(d);if(a.rightClickProtect)d.on("contextmenu",function(a){a.preventDefault();return false});a.enableMouseWheel&&x.mousewheel(function(a,b){b>0?ea():U();return false});setTimeout(function(){if(b.support.touch)d.on("touchstart",Fa);else f.length>1&&h&&d.click(function(){U();return false});
f.length>1&&d.addSwipe(function(){b(this).trigger("unswipe");U()},function(){b(this).trigger("unswipe");ea()})},a.speed/2);a.transitions?x.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:b.browser.cssFilter?function(){x.css({filter:""})}:null}).centerThis({init:true,speed:Math.round(a.speed*0.75),marginTop:ca(),preScale:h&&a.preScale,animate:h&&a.preScale&&a.preScale!=1,fit:a.fitImage}):x.show().centerThis({init:true,marginTop:ca(),fit:a.fitImage});var j=y,k=x.find("nav a."+
c.regions+"-icon").eq(0);if(k.length){j=f.eq(j).find("img:first");k.addRegions(x.find("."+c.main).eq(0),j.data(c.regions))}Ba(y+1);Ba(y-1);if(a.hash==="number")b.history.load(y+1);else if(a.hash==="fileName")(k=qa())&&b.history.load(k)};if(f.length){if(a.header!=null){var E=b(a.header);if(E.length){if(a.showStart){var ga=b("<div>",{"class":c.startBtn,text:" "}).appendTo(E),Ca=b("<div>",{"class":c.startTxt,text:d.startSlideshow}).appendTo(E);ga.mouseenter(function(){Ca.stop(true,false).css({opacity:1}).hide().fadeIn(250)}).mouseleave(function(){Ca.stop(true,
false).fadeOut(500)}).click(function(){a.slideshowFullScreen&&h.fullScreen(true);M();aa();return false})}ga=E.find("."+c.parent+">a");if(ga.length)a.uplink=ga.attr("href")}}h=b("<div>",{"class":c.gallery}).attr("role","gallery").appendTo("body");i=b("<div>",{"class":c.wait}).appendTo(h);var J=p=b("<div>",{"class":c.navigation}).appendTo(h),ba,X,ma,Y,da,na=0;e=b("<div>",{"class":c.scrollbox}).appendTo(J);tc=b("<div>",{"class":"wrap"}).appendTo(e);tc=b("<ul>",{"class":c.cont}).appendTo(tc);f.each(function(d){J=
b(this);if(a.rightClickProtect)J.on("contextmenu",function(a){a.preventDefault();return false});Y=J.find("img").eq(0);da=J.attr("href");if(Y.length&&da){X=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(tc));ma=b("<img>").appendTo(X);Y.data(c.src,da);Y.attr("src").endsWith("/"+a.loadImg)?Y.add(ma).attr("src",a.thumbs+"/"+da.substring(da.lastIndexOf("/")+1).fixExtension()):ma.attr("src",Y.attr("src"));if((ba=J.attr("title"))&&ba.length)J.add(X).addHint(ba);else{ba=J.next();ba.length&&X.addHint(ba.html())}a.markNewDays&&
k-parseInt(Y.data(c.modified)||0)<=a.markNewDays&&J.add(X).append(j);J.click(function(){if(b(this).parents("[role=scroll]").data("dragOn")===true)return false;if(!b(this).hasClass(c.active)&&x&&x.length){x.stop();fa(x);x.remove()}M(f.eq(d));return false});X.click(function(){if(b(this).parents("[role=scroll]").data("dragOn")===true)return false;b(this).hasClass(c.active)||M(f.eq(d));b(this).trigger("active");return false});na=na+X.outerWidth(true)}});tc.width(na).scrollThumbs({enableMouseWheel:a.enableMouseWheel});
w=e;C=w.find(".cont a");E=b("<nav>",{"class":"controls clearfix"}).appendTo(p);n.prev=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(E);n.prev.click(function(){V();ea();return false});n.up=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:d.backToIndex}).appendTo(E);n.up.click(function(){V();S();return false});n.noresize=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(E);n.noresize.click(function(){ua();return false});n.resize=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(E);
n.resize.click(function(){va();return false});if(a.fitImage){n.resize.hide();n.noresize.showin()}else{n.noresize.hide();n.resize.showin()}n.hideInfo=b("<a>",{"class":c.hideInfo,title:d.hideInfo}).appendTo(E);n.hideInfo.click(function(){wa();return false});n.showInfo=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(E);n.showInfo.click(function(){ya();return false});if(a.infoOn){n.showInfo.hide();n.hideInfo.showin()}else{n.hideInfo.hide();n.showInfo.showin()}n.hideThumbs=b("<a>",{"class":c.hideThumbs,
title:d.hideThumbs}).appendTo(E);n.hideThumbs.click(function(){xa();return false});n.showThumbs=b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(E);n.showThumbs.click(function(){za();return false});if(a.thumbsOn){n.showThumbs.hide();n.hideThumbs.showin()}else{n.hideThumbs.hide();n.showThumbs.showin()}n.play=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(E);n.play.click(function(){a.slideshowFullScreen&&h.fullScreen(true);aa();return false});n.pause=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(E);
n.pause.click(function(){V();return false});if(a.slideshowAuto){n.play.hide();n.pause.showin()}else{n.pause.hide();n.play.showin()}n.next=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(E);n.next.click(function(){ka();U();return false});var oa=0;E.children().each(function(){b(this).css("display")!=="none"&&(oa=oa+b(this).outerWidth())});E.width(oa);E.children("a").addHint();u=E;a.thumbsOn||p.css("top",-w.outerHeight()-10);w.mouseenter(function(){H();A=true}).mouseleave(function(){A=false});
u.mouseenter(function(){F=true;b(this).stop(true,false).fadeTo(200,1)}).mouseleave(function(){F=false;b(this).stop(true,false).fadeTo(200,a.controlbarOpacity)});var Da=0,Ea=0;b.support.touch||h.mousemove(function(a){if(!A&&(Da-a.clientY||Ea-a.clientX)){Aa();Ea=a.clientX;Da=a.clientY}});if(a.mapAll){var ha,ia,pa;f.each(function(a){ha=b(this).find("img:first");if(ha.length&&(ia=ha.data("map"))&&(ia=ta(ia))){pa=m(ha);Z.push({map:ia,label:a+1+(pa?": "+pa.stripHTML():""),link:b(this)})}})}!b.support.touch&&
(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(ja);a.hash&&a.hash!=="no"&&b.history.init(function(c){var d,g;if(g=c)if(g=c.length){if(a.hash==="number")c=(parseInt(c)||1)-1;else a:{var h;for(g=0;g<f.length;g++)if((h=f.eq(g).attr("href"))&&h.substring(h.lastIndexOf("/")+1)===c){c=g;break a}c=-1}g=(d=c)>=0&&d<f.length}if(g){M(d);a.slideshowAuto=false}else{S();b.browser.msie&&setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},
10)}});T(true);if(a.slideshowAuto){a.slideshowFullScreen&&h.fullScreen(true);M(y);aa()}else a.skipIndex&&M(y);b(window).resize(function(){clearTimeout(K);K=setTimeout(function(){var c=b(window).width(),d=b(window).height();if(c!==O||d!==W){x&&x.centerThis({fit:a.fitImage,marginTop:ca()});O=c;W=d}},100)})}})};b.fn.turtleGallery.defaults={hash:"fileName",resPath:"",relPath:"",level:0,skipIndex:false,showStart:true,speed:600,controlbarOpacity:0.7,transitions:true,preScale:0.95,slideshowDelay:3E3,slideshowLoop:false,
slideshowAuto:false,slideshowFullScreen:false,markNewDays:30,afterLast:"ask",infoOn:true,showImageNumbers:true,thumbsOn:false,fitImage:true,fitShrinkonly:true,fitFreespace:true,fitPadding:15,borderWidth:10,rightClickProtect:false,metaOn:false,mapOn:false,shopOn:false,fotomotoOn:false,shareOn:false,printOn:false,enableKeyboard:true,enableMouseWheel:true,numberLinks:false,videoAuto:true,videoFit:true,videoWidth:640,videoHeight:480,scrollDuration:1E3};b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",
close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",closeWindow:"Close window",
clickToOpen:"Click to open this document with the associated viewer",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",locationWarning:"Works only when uploaded"};b.fn.turtleGallery.ids={gallery:"gallery",
navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",fotomoto:"fotomoto",share:"share",print:"print",comment:"comment",link:"link",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",regions:"regions",isvideo:"isvideo",
isaudio:"isaudio",isother:"isother",modified:"modified",startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",newItem:"newlabel",showHint:"showhint"}})(jQuery);